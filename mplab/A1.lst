MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 
                      00002                 list p=16F873A
                      00003                 include "p16f873a.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F873A processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2010 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00515         LIST
2007   3F39           00004                 __CONFIG 0x3F39; OSCILADOR XT, SIN WDT
                      00005 
                      00006 
                      00007 
                      00008 
                      00009 
                      00010 
                      00011 
                      00012 
                      00013 
                      00014 ; ESTE PROGRAMA USA EL PUERTO B PARA MOSTRAR 4 DISPLAYS 7 SEGMENTOS 
                      00015 ;  PUERTOB BIT 7.. 4 ELEGIR DISPLAY
                      00016 ;  PUERTOB BIT 3.. 0 AL BCD
                      00017 ;
                      00018 ; EL PUERTO C PARA PRENDER 7 RELES
                      00019 ; EL PUERTO A PARA TOMAR MEDICIONES
                      00020 
                      00021 
                      00022 
                      00023 
                      00024 
  00000030            00025 MILISEGUNDO EQU 0X30
  00000031            00026 CUARTOSEGUNDO EQU 0X31
  00000032            00027 SEGUNDO       EQU 0X32
  00000033            00028 ADCFLAG       EQU 0X33
                      00029 
                      00030 
  00000034            00031 FRECFLAG      EQU 0X34   ; ESTA BANDERA SE ACTIVA CADA 250 MILISEGUNDOS
  00000035            00032 FRECFLAG2     EQU 0X35   ; ESTA BANDERA SE ACTIVA CADA 5 SEGUNDOS
                      00033 
  00000036            00034 FREC1         EQU 0X36   ; CADA VEZ QUE LA TENSIÓN SE ENCUENTRA EN DETERMINADO NIVEL SE 
                      00035                         ;INCREMENTA EL FRECx CORRESPONDIENTE
  00000037            00036 FREC2         EQU 0X37   ; CADA 250 MSEG APROXIMADAMENTE SE TOMA CUAL ES EL QUE MAS AUMENTÓ.
  00000038            00037 FREC3         EQU 0X38
  00000039            00038 FREC4         EQU 0X39
  0000003A            00039 FREC5         EQU 0X3A
  0000003B            00040 FREC6         EQU 0X3B
  0000003C            00041 FREC7         EQU 0X3C
  0000004E            00042 FREC0         EQU 0X4E
  0000004F            00043 FREC8         EQU 0X4F
                      00044 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00045 
  0000003D            00046 POSICIONX     EQU 0X3D
  0000003E            00047 INDICEX       EQU 0X3E    ; VARIABLES PARA DIRECCIONAMIENTO INDIRECTO, SE USAN EN LAS COMPARACIONES
                      00048                               ; DE LAS FRECUENCIAS
  0000003F            00049 VALORX        EQU 0X3F
                      00050 
                      00051 
                      00052 
                      00053 
                      00054 
                      00055 
  00000040            00056 WREGAUX       EQU 0X40
  00000041            00057 STATUSAUX     EQU 0X41
  00000042            00058 PCLATHAUX     EQU 0X42
                      00059 
  00000045            00060 FRECUENCIA0   EQU 0X45
  00000046            00061 FRECUENCIA1   EQU 0X46   ;  CADA VEZ QUE SE DECIDE CUAL FRECUENCIA AUMENTÓ ENTRE LOS FRECx SE INCREMENTE
                      00062                          ; EN UNO EL REGISTRO FRECUENCIAx CORRESPONDIENTE
  00000047            00063 FRECUENCIA2   EQU 0X47   ; CADA 5 SEGUNDOS SE TOMA EL QUE MAS HAYA AUMENTADO Y CON ESO SE PRENDE UN RELÉ
  00000048            00064 FRECUENCIA3   EQU 0X48   ; EL REGISTRO FRECUENCIAx ES LA CONTINUACION DE FRECx, PERO COMO CADA REGISTRO 
                            USA 8 BITS, 
  00000049            00065 FRECUENCIA4   EQU 0X49   ;SE USAN 2 PARA PODER CONTAR CADA 5 SEGUNDOS CON UNA ESPECIE DE PROMEDIACION
  0000004A            00066 FRECUENCIA5   EQU 0X4A
  0000004B            00067 FRECUENCIA6   EQU 0X4B
  0000004C            00068 FRECUENCIA7   EQU 0X4C
  0000004D            00069 FRECUENCIA8   EQU 0X4D
                      00070 
                      00071 
                      00072 
                      00073 
  00000051            00074 DISPLAY1    EQU 0X51     ; VARIABLES PARA EL DISPLAY
  00000052            00075 DISPLAY2    EQU 0X52
  00000053            00076 DISPLAY3    EQU 0X53
  00000054            00077 DISPLAY4    EQU 0X54
  00000055            00078 DISPLAYFLAG   EQU 0X55
                      00079 
                      00080 
                      00081 
  0000005C            00082 ARITCARRIER EQU 0X5C ; VARIABLES PARA OPERACIONES MATEMATICAS GENERALES
  0000005D            00083 ARIT_AUX    EQU 0X5D
  0000005E            00084 NUM1        EQU 0X5E
  0000005F            00085 NUM2        EQU 0X5F
  00000060            00086 DIVDRTAH    EQU 0X60 
  00000061            00087 DIVDRTAL    EQU 0X61
                      00088 
  00000062            00089 NUMDH       EQU 0X62
  00000063            00090 NUMDL       EQU 0X63
                      00091 
  00000064            00092 ADPROML     EQU 0X64
  00000065            00093 ADPROMH     EQU 0X65
                      00094 
  00000066            00095 UC          EQU 0X66 ; UNIDAD DE CONVERSOR
  00000067            00096 DCV         EQU 0X67 ; DECIMA DE CONVERSOR
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000068            00097 CC          EQU 0X68; LIMPIAR CENTESIMA DE CONVERSOR
  00000069            00098 MC          EQU 0X69; LIMPIAR MILESIMA DE CONVERSOR
  00000070            00099 DMC         EQU 0X70; LIMPIAR DECIMA DE MILESIMA DE CONVERSOR
  00000071            00100 CMC         EQU 0X71; LIMPIAR CENTESIMA DE MILESIMA DE CONVERSOR           
                      00101 
  00000075            00102 COMPA       EQU 0X75
                      00103 
                      00104 
                      00105 
0000                  00106                 ORG 0X00
0000   282E           00107                 GOTO CONFIGURACION
0001   282E           00108                 GOTO CONFIGURACION
                      00109 
                      00110 
                      00111 ;-----------  TEORÍA: COMPARACIONES
                      00112 ;------- USANDO EL SUBWF F,0
                      00113 ;
                      00114 ;   SI W<F   -> Z=0 C=1
                      00115 ;   SI W== F -> Z=1 C=1
                      00116 ;   SI W>F   -> Z=0 C=0
                      00117 ;------- USANDO EL SUBLW K
                      00118 ;
                      00119 ;   SI W<K   -> Z=0 C=1
                      00120 ;   SI W== K -> Z=1 C=1
                      00121 ;   SI W>K   -> Z=0 C=0
                      00122 ;
                      00123 ;
                      00124 
                      00125 
                      00126 
                      00127 
0004                  00128                 ORG 0X04
                      00129                 
                      00130 
0004   00C0           00131                 MOVWF WREGAUX   ; GUARDAR REGISTROS IMPORTANTES: PCLATH STATUS Y WREG
0005   0803           00132                 MOVF  STATUS,0
0006   00C1           00133                 MOVWF STATUSAUX
0007   080A           00134                 MOVF  PCLATH,0
                      00135 
0008   00C2           00136                 MOVWF PCLATHAUX
                      00137                 
0009   1383           00138                 BCF STATUS,IRP   ; IR AL BANCO 0 (ES IMPORTANTE PORQUE EN MOMENTOS EL PROGRAMA CAMBIA EL
                             BANCO
                      00139                                  ; HAY QUE TENER CUIDADO CON LAS INTERRUPCIONES)
000A   1283           00140                 BCF STATUS,RP0
000B   1303           00141                 BCF STATUS,RP1
                      00142 
000C   018A           00143                 CLRF PCLATH
000D   0000           00144                 NOP
000E   0000           00145                 NOP
000F   0000           00146                 NOP
                      00147 
0010   3085           00148                 MOVLW .133
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0011   0081           00149                 MOVWF TMR0  ; TIENE QUE CONTAR 125 PERO EMPIEZA EN 133 YA QUE HAY 16 INSTRUCCIONES ANTES
                      00150 
                      00151 
0012   110B           00152                 BCF INTCON,2; TMR0IF:0 SE REINICIA LA INTERRUPCION
                      00153 
                      00154                 ;BSF DISPLAYFLAG,0;  SE HABILITA PARA ATENDER AL DISPLAY
                      00155 
                      00156 
0013   1433           00157                 BSF ADCFLAG,0;      SE HABILITA PARA ATENDER AL CONVERSOR
                      00158 
                      00159 
0014   0AB0           00160                 INCF MILISEGUNDO,1       ; MILISEGUNDO++
0015   0830           00161                 MOVF MILISEGUNDO,0     ; MILISEGUNDO> 249??
0016   3CF9           00162                 SUBLW .249        
0017   1803           00163                 BTFSC STATUS,C
0018   2828           00164                 GOTO  SALIRINT       ;NO
                      00165                 
0019   01B0           00166                 CLRF MILISEGUNDO     ;SI  ;MILISEGUNDO=0
                      00167 
001A   1434           00168                 BSF FRECFLAG,0;  SE HABILITA PARA ATENDER A FRECFLAG
                      00169                 ;BSF ADCFLAG,1; HABILITACION DE DIGITALIZACION
                      00170 
                      00171 
                      00172 
                      00173 
001B   0AB1           00174                 INCF CUARTOSEGUNDO,1      ; CUARTOSEGUNDO++
001C   0831           00175                 MOVF CUARTOSEGUNDO,0    ; CUARTOSEGUNDO>3 ??
001D   3C03           00176                 SUBLW .3
001E   1803           00177                 BTFSC STATUS,C
001F   2828           00178                 GOTO  SALIRINT        ;NO
0020   01B1           00179                 CLRF CUARTOSEGUNDO    ;SI   CUARTOSEGUNO=0  
                      00180 
                      00181 
                      00182 
                      00183 
0021   0AB2           00184                 INCF SEGUNDO,1      ; SEGUNDO++
0022   0832           00185                 MOVF SEGUNDO,0    ; SEGUNDO>2 ??
0023   3C02           00186                 SUBLW .2
0024   1803           00187                 BTFSC STATUS,C
0025   2828           00188                 GOTO  SALIRINT        ;NO
0026   01B2           00189                 CLRF SEGUNDO    ;SI   SEGUNDO=0   
                      00190 
0027   1435           00191                 BSF FRECFLAG2,0;  SE HABILITA PARA ATENDER FRECFLAG2
                      00192 
                      00193 
                      00194 
                      00195 
                      00196 
                      00197 
0028   0842           00198 SALIRINT        MOVF PCLATHAUX,0 ; RESCATAR VARIABLES GUARDADAS
0029   008A           00199                 MOVWF PCLATH
002A   0841           00200                 MOVF STATUSAUX,0
002B   0083           00201                 MOVWF STATUS
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

002C   0840           00202                 MOVF WREGAUX,0   
                      00203 
                      00204 
002D   0009           00205                 RETFIE
                      00206 
                      00207 
                      00208 
                      00209 ;-------------------------------------------------------
                      00210 ;-------------------------------------------------------
                      00211 ;-------------------------------------------------------
                      00212 
                      00213 
                      00214 
                      00215 
                      00216 
002E                  00217 CONFIGURACION
                      00218 
                      00219 
002E   1383           00220                 BCF STATUS, IRP
                      00221 
002F   1303           00222                 BCF STATUS, RP1  ; RP1:RP0= 01 *************BANCO 1
0030   1683           00223                 BSF STATUS, RP0;
                      00224 
                      00225 
                      00226 
                      00227                                   ;---------TIMER 0
                      00228 
0031   3002           00229                 MOVLW B'00000010'  ;  prescaler = 1:4  ; tiempo = 4*1/4Mhz*8= 8 microsegundos 
                      00230                                    ;(cada 125 cuentas pasa un misegundo)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0032   0081           00231                 MOVWF OPTION_REG
                      00232 
                      00233 
                      00234 
                      00235 
                      00236                                   ; ----------CONVERSOR PARTE 1 DE 2
0033   304F           00237                 MOVLW B'01001111' ; TOSC 1/16 / PUERTO AN0 (PORTA0)
                      00238 
                      00239                                   ; AQUI SE HA ELEGIDO CON REFERENCIA INTERNA
                      00240                                   ; EN EL PROGRAMA CON REFRENCIA HAY QUE PONER B'01001111'
                      00241                                   ; O SI SE DESEA OTRO CANAL PONER EN B'01001101'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0034   009F           00242                 MOVWF ADCON1    
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0035   018C           00243                 CLRF PIE1         ; SIN INTERRUPCIONES  
                      00244 
                      00245           
                      00246 
                      00247 
                      00248 
                      00249 
                      00250                                     ;-------------PUERTOS
                      00251 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0036   3000           00252                 MOVLW B'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0037   0087           00253                 MOVWF TRISC
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0038   0086           00254                 MOVWF TRISB
0039   30FF           00255                 MOVLW 0XFF
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
003A   0085           00256                 MOVWF TRISA
                      00257 
                      00258 
                      00259 
                      00260 
                      00261 
003B   1283           00262                 BCF STATUS,RP0 ; RP1:RP0= 00  *****************BANCO 0
                      00263 
                      00264 
                      00265 
                      00266                                    ; ------------CONVERSOR PARTE 2 DE 2
                      00267 
003C   3041           00268                 MOVLW B'01000001' ; 1/16  // CANAL AN0 // CONVERSOR PRENDIDO
003D   009F           00269                 MOVWF ADCON0
                      00270 
                      00271 
                      00272 
003E   0187           00273                 CLRF PORTC
                      00274 
003F   0186           00275                 CLRF PORTB
                      00276 
                      00277 
                      00278 
                      00279 
                      00280 
                      00281 
                      00282 
                      00283                                     ;INICIALIZANDO VARIABLES GENERALES
0040   01B0           00284                 CLRF MILISEGUNDO
0041   01B1           00285                 CLRF CUARTOSEGUNDO
0042   018A           00286                 CLRF PCLATH
                      00287 
0043   3008           00288                 MOVLW .8
0044   00D4           00289                 MOVWF DISPLAY4
0045   3007           00290                 MOVLW .7
0046   00D3           00291                 MOVWF DISPLAY3
0047   3006           00292                 MOVLW .6
0048   00D2           00293                 MOVWF DISPLAY2
0049   3005           00294                 MOVLW .5
004A   00D1           00295                 MOVWF DISPLAY1
004B   01D5           00296                 CLRF DISPLAYFLAG
004C   01B3           00297                 CLRF ADCFLAG
                      00298                 
                      00299 
                      00300 
                      00301 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00302 
                      00303 
004D   30A0           00304                 MOVLW B'10100000' ; <<<<<<<<< GLOBAL INTERRUPTION ACTIVADAS, INTERRUPCION TMR0 ACTIVADO
004E   008B           00305                 MOVWF INTCON
                      00306 
004F   3083           00307                 MOVLW .131 ; INICIALIZAR TIMER 0
0050   0081           00308                 MOVWF TMR0
                      00309 
                      00310                
                      00311 ;----------------------------------------------------
                      00312 ;====================================================*******************************************
                      00313 ;----------------------------------------------------
                      00314 
                      00315 
0051                  00316 BUCLE          
                      00317 
                      00318 
0051                  00319 DISPLAY         
                      00320 
0051   1C55           00321                 BTFSS DISPLAYFLAG,0
0052   286C           00322                 GOTO PROMFREC
0053   0186           00323                 CLRF PORTB               
0054   1055           00324                 BCF DISPLAYFLAG,0; SE DESHABILITA LA ATENCIÓN DEL DISPLAY
                      00325 
0055   0830           00326                 MOVF MILISEGUNDO,0
0056   3903           00327                 ANDLW B'00000011'
0057   0782           00328                 ADDWF PCL,1
                      00329 
0058   285C           00330                 GOTO DIS1
0059   2860           00331                 GOTO DIS2
005A   2864           00332                 GOTO DIS3
005B   2868           00333                 GOTO DIS4
                      00334 
                      00335 
005C   0851           00336 DIS1            MOVF DISPLAY1,0
005D   0086           00337                 MOVWF PORTB
005E   1786           00338                 BSF PORTB,7
005F   286C           00339                 GOTO PROMFREC
                      00340 
0060   0852           00341 DIS2            MOVF DISPLAY2,0
0061   0086           00342                 MOVWF PORTB
0062   1706           00343                 BSF PORTB,6
0063   286C           00344                 GOTO PROMFREC
                      00345 
0064   0853           00346 DIS3            MOVF DISPLAY3,0
0065   0086           00347                 MOVWF PORTB
0066   1686           00348                 BSF PORTB,5
0067   286C           00349                 GOTO PROMFREC
                      00350 
0068   0854           00351 DIS4            MOVF DISPLAY4,0
0069   0086           00352                 MOVWF PORTB
006A   1606           00353                 BSF PORTB,4
006B   286C           00354                 GOTO PROMFREC
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00355 
                      00356 
                      00357 
                      00358 
                      00359                       ;-----------------------SACAR EL DE MAYOR FRECUENCIAS CADA 250 MILISEGUNDOS       
                                    
                      00360 
                      00361 
006C                  00362 PROMFREC
006C   1C34           00363                 BTFSS FRECFLAG,0
006D   28DC           00364                 GOTO PROMFREC2
                      00365 
006E   1034           00366                 BCF FRECFLAG,0
                      00367 
                      00368                 
006F   01BE           00369                 CLRF INDICEX ; INICIALIZAMOS CON INDICEX=0 EL PRIMERO DE TODOS
0070   084E           00370                 MOVF FREC0,0
0071   00BF           00371                 MOVWF VALORX
                      00372 
                      00373 
                      00374 ;------- USANDO EL SUBWF F,0
                      00375 ;
                      00376 ;   SI W<F   -> Z=0 C=1
                      00377 ;   SI W== F -> Z=1 C=1
                      00378 ;   SI W>F   -> Z=0 C=0
                      00379 
0072   0836           00380 PROMFPASO1      MOVF FREC1,0
0073   023F           00381                 SUBWF VALORX,0
0074   1803           00382                 BTFSC STATUS,C ; FREC2> VALORX?
0075   287A           00383                 GOTO PROMFPASO2; NO
                      00384 
0076   3001           00385                 MOVLW .1
0077   00BE           00386                 MOVWF INDICEX  ; SI FREC2 ES MAYOR ENTONCES INDICEX=1
0078   0836           00387                 MOVF FREC1,0
0079   00BF           00388                 MOVWF VALORX
                      00389 
007A   0837           00390 PROMFPASO2      MOVF FREC2,0
007B   023F           00391                 SUBWF VALORX,0
007C   1803           00392                 BTFSC STATUS,C ; FREC2> VALORX?
007D   2882           00393                 GOTO PROMFPASO3; NO
                      00394 
007E   3002           00395                 MOVLW .2
007F   00BE           00396                 MOVWF INDICEX  ; SI FREC2 ES MAYOR ENTONCES INDICEX=1
0080   0837           00397                 MOVF FREC2,0
0081   00BF           00398                 MOVWF VALORX
                      00399 
0082   0838           00400 PROMFPASO3      MOVF FREC3,0
0083   023F           00401                 SUBWF VALORX,0
0084   1803           00402                 BTFSC STATUS,C ; FREC3> VALORX?
0085   288A           00403                 GOTO PROMFPASO4; NO
                      00404 
0086   3003           00405                 MOVLW .3
0087   00BE           00406                 MOVWF INDICEX ; SI FREC3 ES MAYOR ENTONCES INDICEX=2
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0088   0838           00407                 MOVF FREC3,0
0089   00BF           00408                 MOVWF VALORX
                      00409 
008A   0839           00410 PROMFPASO4      MOVF FREC4,0
008B   023F           00411                 SUBWF VALORX,0
008C   1803           00412                 BTFSC STATUS,C ; FREC4> VALORX?
008D   2892           00413                 GOTO PROMFPASO5; NO
                      00414 
008E   3004           00415                 MOVLW .4
008F   00BE           00416                 MOVWF INDICEX ; SI FREC4 ES MAYOR ENTONCES INDICEX=3
0090   0839           00417                 MOVF FREC4,0
0091   00BF           00418                 MOVWF VALORX
                      00419 
0092   083A           00420 PROMFPASO5      MOVF FREC5,0
0093   023F           00421                 SUBWF VALORX,0
0094   1803           00422                 BTFSC STATUS,C ; FREC5> VALORX?
0095   289A           00423                 GOTO PROMFPASO6; NO
                      00424 
0096   3005           00425                 MOVLW .5
0097   00BE           00426                 MOVWF INDICEX ; SI FREC5 ES MAYOR ENTONCES INDICEX=4
0098   083A           00427                 MOVF FREC5,0
0099   00BF           00428                 MOVWF VALORX
                      00429 
009A   083B           00430 PROMFPASO6      MOVF FREC6,0
009B   023F           00431                 SUBWF VALORX,0
009C   1803           00432                 BTFSC STATUS,C ; FREC6> VALORX?
009D   28A2           00433                 GOTO PROMFPASO7; NO
                      00434 
009E   3006           00435                 MOVLW .6
009F   00BE           00436                 MOVWF INDICEX ; SI FREC6 ES MAYOR ENTONCES INDICEX=5
00A0   083B           00437                 MOVF FREC6,0
00A1   00BF           00438                 MOVWF VALORX
                      00439 
00A2   083C           00440 PROMFPASO7      MOVF FREC7,0
00A3   023F           00441                 SUBWF VALORX,0
00A4   1803           00442                 BTFSC STATUS,C ; FREC6> VALORX?
00A5   28AA           00443                 GOTO PROMFPASO8; NO
                      00444 
00A6   3007           00445                 MOVLW .7
00A7   00BE           00446                 MOVWF INDICEX ; SI FREC6 ES MAYOR ENTONCES INDICEX=5
00A8   083C           00447                 MOVF FREC7,0
00A9   00BF           00448                 MOVWF VALORX
                      00449 
00AA   084F           00450 PROMFPASO8      MOVF FREC8,0
00AB   023F           00451                 SUBWF VALORX,0
00AC   1803           00452                 BTFSC STATUS,C ; FREC7> VALORX?
00AD   28B2           00453                 GOTO PROMFBORRAR; NO
                      00454 
00AE   3008           00455                 MOVLW .8
00AF   00BE           00456                 MOVWF INDICEX ; SI FREC7 ES MAYOR ENTONCES INDICEX=6
00B0   084F           00457                 MOVF FREC8,0
00B1   00BF           00458                 MOVWF VALORX
                      00459 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00460               
                      00461 
00B2                  00462 PROMFBORRAR
00B2   01CE           00463                 CLRF FREC0
00B3   01B6           00464                 CLRF FREC1
00B4   01B7           00465                 CLRF FREC2
00B5   01B8           00466                 CLRF FREC3
00B6   01B9           00467                 CLRF FREC4
00B7   01BA           00468                 CLRF FREC5
00B8   01BB           00469                 CLRF FREC6
00B9   01BC           00470                 CLRF FREC7
00BA   01CF           00471                 CLRF FREC8
                      00472 
                      00473 
                      00474 
                      00475 
00BB   083E           00476                 MOVF INDICEX,0   ; INDICEX ES DONDE SE GUARDA CUAL DE TODOS ES EL MAYOR DE 0 A 6
                      00477 
00BC   0782           00478                 ADDWF PCL,1      ; INDICEX SE AÑADE A PCL QUE ES EL CONTADOR DE SENTENCIAS
                      00479                                  ; ESTO HACE QUE SALTE TANTAS LINEAS COMO DICE INDICEX (DE 0 A 6)
                      00480 
00BD   28C9           00481                 GOTO INCFRE0
00BE   28CB           00482                 GOTO INCFRE1
00BF   28CD           00483                 GOTO INCFRE2
00C0   28CF           00484                 GOTO INCFRE3
00C1   28D1           00485                 GOTO INCFRE4
00C2   28D3           00486                 GOTO INCFRE5
00C3   28D5           00487                 GOTO INCFRE6
00C4   28D7           00488                 GOTO INCFRE7
00C5   28D9           00489                 GOTO INCFRE8
00C6   0000           00490                 NOP
00C7   0000           00491                 NOP
00C8   0000           00492                 NOP
                      00493                              ; AQUEL QUE HAYA TENIDO MAS FRECUENCIA HARA AUMENTAR FRECUENCIAx CORRESPOND
                            IENTE
                      00494 
00C9   0AC5           00495 INCFRE0         INCF FRECUENCIA0,1
00CA   2851           00496                 GOTO BUCLE
00CB   0AC6           00497 INCFRE1         INCF FRECUENCIA1,1
00CC   2851           00498                 GOTO BUCLE
00CD   0AC7           00499 INCFRE2         INCF FRECUENCIA2,1
00CE   2851           00500                 GOTO BUCLE
00CF   0AC8           00501 INCFRE3         INCF FRECUENCIA3,1
00D0   2851           00502                 GOTO BUCLE
00D1   0AC9           00503 INCFRE4         INCF FRECUENCIA4,1
00D2   2851           00504                 GOTO BUCLE
00D3   0ACA           00505 INCFRE5         INCF FRECUENCIA5,1
00D4   2851           00506                 GOTO BUCLE
00D5   0ACB           00507 INCFRE6         INCF FRECUENCIA6,1
00D6   2851           00508                 GOTO BUCLE
00D7   0ACC           00509 INCFRE7         INCF FRECUENCIA7,1
00D8   2851           00510                 GOTO BUCLE
00D9   0ACD           00511 INCFRE8         INCF FRECUENCIA8,1
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DA   2851           00512                 GOTO BUCLE
                      00513 
00DB   2851           00514                 GOTO BUCLE
                      00515 
                      00516 
                      00517                                   ;--------------------------------------  2 PROMEDIO
                      00518 
                      00519 
                      00520 
00DC                  00521 PROMFREC2
00DC   1C35           00522                 BTFSS FRECFLAG2,0
00DD   2960           00523                 GOTO LEERAD
                      00524 
00DE   1035           00525                 BCF FRECFLAG2,0
                      00526 
                      00527                 
00DF   01BE           00528                 CLRF INDICEX ; INICIALIZAMOS CON INDICEX=0  : EL PRIMERO DE TODOS
00E0   0845           00529                 MOVF FRECUENCIA0,0
00E1   00BF           00530                 MOVWF VALORX
                      00531 
                      00532 
                      00533 ;------- USANDO EL SUBWF F,0
                      00534 ;
                      00535 ;   SI W<F   -> Z=0 C=1
                      00536 ;   SI W== F -> Z=1 C=1
                      00537 ;   SI W>F   -> Z=0 C=0
                      00538 
00E2   0846           00539 PROMFPASO12     MOVF FRECUENCIA1,0
00E3   023F           00540                 SUBWF VALORX,0
00E4   1803           00541                 BTFSC STATUS,C ; FRECUENCIA2> VALORX?
00E5   28EA           00542                 GOTO PROMFPASO22; NO
                      00543 
00E6   3001           00544                 MOVLW .1
00E7   00BE           00545                 MOVWF INDICEX
00E8   0846           00546                 MOVF FRECUENCIA1,0
00E9   00BF           00547                 MOVWF VALORX
                      00548 
                      00549 
00EA   0847           00550 PROMFPASO22     MOVF FRECUENCIA2,0
00EB   023F           00551                 SUBWF VALORX,0
00EC   1803           00552                 BTFSC STATUS,C ; FRECUENCIA2> VALORX?
00ED   28F2           00553                 GOTO PROMFPASO32; NO
                      00554 
00EE   3002           00555                 MOVLW .2
00EF   00BE           00556                 MOVWF INDICEX
00F0   0847           00557                 MOVF FRECUENCIA2,0
00F1   00BF           00558                 MOVWF VALORX
                      00559 
00F2   0848           00560 PROMFPASO32     MOVF FRECUENCIA3,0
00F3   023F           00561                 SUBWF VALORX,0
00F4   1803           00562                 BTFSC STATUS,C ; FRECUENCIA3> VALORX?
00F5   28FA           00563                 GOTO PROMFPASO42; NO
                      00564 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F6   3003           00565                 MOVLW .3
00F7   00BE           00566                 MOVWF INDICEX
00F8   0848           00567                 MOVF FRECUENCIA3,0
00F9   00BF           00568                 MOVWF VALORX
                      00569 
00FA   0849           00570 PROMFPASO42     MOVF FRECUENCIA4,0
00FB   023F           00571                 SUBWF VALORX,0
00FC   1803           00572                 BTFSC STATUS,C ; FRECUENCIA4> VALORX?
00FD   2902           00573                 GOTO PROMFPASO52; NO
                      00574 
00FE   3004           00575                 MOVLW .4
00FF   00BE           00576                 MOVWF INDICEX
0100   0849           00577                 MOVF FRECUENCIA4,0
0101   00BF           00578                 MOVWF VALORX
                      00579 
0102   084A           00580 PROMFPASO52     MOVF FRECUENCIA5,0
0103   023F           00581                 SUBWF VALORX,0
0104   1803           00582                 BTFSC STATUS,C ; FRECUENCIA5> VALORX?
0105   290A           00583                 GOTO PROMFPASO62; NO
                      00584 
0106   3005           00585                 MOVLW .5
0107   00BE           00586                 MOVWF INDICEX
0108   084A           00587                 MOVF FRECUENCIA5,0
0109   00BF           00588                 MOVWF VALORX
                      00589 
010A   084B           00590 PROMFPASO62     MOVF FRECUENCIA6,0
010B   023F           00591                 SUBWF VALORX,0
010C   1803           00592                 BTFSC STATUS,C ; FRECUENCIA6> VALORX?
010D   2912           00593                 GOTO PROMFPASO72; NO
                      00594 
010E   3006           00595                 MOVLW .6
010F   00BE           00596                 MOVWF INDICEX
0110   084B           00597                 MOVF FRECUENCIA6,0
0111   00BF           00598                 MOVWF VALORX
                      00599 
0112   084C           00600 PROMFPASO72     MOVF FRECUENCIA7,0
0113   023F           00601                 SUBWF VALORX,0
0114   1803           00602                 BTFSC STATUS,C ; FRECUENCIA6> VALORX?
0115   291A           00603                 GOTO PROMFPASO82; NO
                      00604 
0116   3007           00605                 MOVLW .7
0117   00BE           00606                 MOVWF INDICEX
0118   084C           00607                 MOVF FRECUENCIA7,0
0119   00BF           00608                 MOVWF VALORX
                      00609 
011A   084D           00610 PROMFPASO82     MOVF FRECUENCIA8,0
011B   023F           00611                 SUBWF VALORX,0
011C   1803           00612                 BTFSC STATUS,C ; FRECUENCIA7> VALORX?
011D   2922           00613                 GOTO PROMFBORRAR2; NO
                      00614 
011E   3008           00615                 MOVLW .8
011F   00BE           00616                 MOVWF INDICEX
0120   084D           00617                 MOVF FRECUENCIA8,0
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0121   00BF           00618                 MOVWF VALORX
                      00619 
                      00620               
                      00621 
0122                  00622 PROMFBORRAR2
0122   01C5           00623                 CLRF FRECUENCIA0
0123   01C6           00624                 CLRF FRECUENCIA1
0124   01C7           00625                 CLRF FRECUENCIA2
0125   01C8           00626                 CLRF FRECUENCIA3
0126   01C9           00627                 CLRF FRECUENCIA4
0127   01CA           00628                 CLRF FRECUENCIA5
0128   01CB           00629                 CLRF FRECUENCIA6
0129   01CC           00630                 CLRF FRECUENCIA7
012A   01CD           00631                 CLRF FRECUENCIA8
                      00632 
                      00633 
012B   3001           00634                 MOVLW .1       ;  SI SE OBSERVA LA MEMORIA DEL PROGRAMA YA ESTAMOS POR ENCIAMA DE LA POS
                            ICION 0100
012C   008A           00635                 MOVWF PCLATH   ;  LA POSICION DEL PROGRAMA ES DE 13 BIS Y PCL SOLO TIENE 8 BITS
                      00636                                ; LA VARIABLE PCLATH ES LA PARTE SUPERIOR POR ESO SE PONE A 01
                      00637                                ; CUANDO TERMINE LA OPERACION DE SALTOS CONVIENE PONER PCLATH EN 00
                      00638 
                      00639 
012D   083E           00640                 MOVF INDICEX,0
                      00641 
012E   0782           00642                 ADDWF PCL,1    ; SE PRODUCE UN SALTO HACIA [PCLATH:(PCL+INDICEX)]
                      00643 
012F   293B           00644                 GOTO INCFRE20
0130   293F           00645                 GOTO INCFRE21
0131   2943           00646                 GOTO INCFRE22
0132   2947           00647                 GOTO INCFRE23
0133   294B           00648                 GOTO INCFRE24
0134   294F           00649                 GOTO INCFRE25
0135   2953           00650                 GOTO INCFRE26
0136   2957           00651                 GOTO INCFRE27
0137   295B           00652                 GOTO INCFRE28
0138   0000           00653                 NOP
0139   0000           00654                 NOP
013A   0000           00655                 NOP
                      00656 
                      00657 
013B   3000           00658 INCFRE20         MOVLW B'00000000'
013C   0087           00659                  MOVWF PORTC
013D   018A           00660                  CLRF PCLATH   ; PCLATH SE RESTAURA A 00
013E   2851           00661                  GOTO BUCLE
013F   3001           00662 INCFRE21         MOVLW B'00000001'
0140   0087           00663                  MOVWF PORTC
0141   018A           00664                  CLRF PCLATH   ; PCLATH SE RESTAURA A 00
0142   2851           00665                  GOTO BUCLE
0143   3002           00666 INCFRE22         MOVLW B'00000010'
0144   0087           00667                  MOVWF PORTC
0145   018A           00668                  CLRF PCLATH
0146   2851           00669                  GOTO BUCLE
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0147   3004           00670 INCFRE23         MOVLW B'00000100'
0148   0087           00671                  MOVWF PORTC
0149   018A           00672                  CLRF PCLATH
014A   2851           00673                  GOTO BUCLE
014B   3008           00674 INCFRE24         MOVLW B'00001000'
014C   0087           00675                  MOVWF PORTC
014D   018A           00676                  CLRF PCLATH
014E   2851           00677                  GOTO BUCLE
014F   3010           00678 INCFRE25         MOVLW B'00010000'
0150   0087           00679                  MOVWF PORTC
0151   018A           00680                  CLRF PCLATH
0152   2851           00681                  GOTO BUCLE
0153   3020           00682 INCFRE26         MOVLW B'00100000'
0154   0087           00683                  MOVWF PORTC
0155   018A           00684                  CLRF PCLATH
0156   2851           00685                  GOTO BUCLE
0157   3040           00686 INCFRE27         MOVLW B'01000000'
0158   0087           00687                  MOVWF PORTC
0159   018A           00688                  CLRF PCLATH
015A   2851           00689                  GOTO BUCLE
015B   3000           00690 INCFRE28         MOVLW B'00000000'
015C   0087           00691                  MOVWF PORTC
015D   018A           00692                  CLRF PCLATH   
015E   2851           00693                  GOTO BUCLE
                      00694 
015F   2851           00695                 GOTO BUCLE
                      00696 
                      00697 
                      00698 
                      00699                                  ;--------------------------------
                      00700 
                      00701 
                      00702 
                      00703                           ; IR HACIA EL CONVERSOR
                      00704 
                      00705 
                      00706 
0160   1C33           00707 LEERAD          BTFSS ADCFLAG,0
0161   2851           00708                 GOTO BUCLE
0162   29A7           00709                 GOTO CONVERTIR
0163   29A7           00710                 GOTO CONVERTIR
                      00711 
                      00712 
                      00713 
                      00714 
                      00715 
                      00716 
                      00717 
                      00718 ;----------------------------------------------------------------------------
                      00719 ;============================================================================
                      00720 ;----------------------------------------------------------------------------
                      00721 
                      00722 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00723 ;   FUNCION NO UTILIZADA EN ESTE PROGRAMA
0164   083D           00724 POSICIONARX     MOVF POSICIONX,0  ; OBTENEMOS EL VALOR DEL POSICIONX:INDICEX
0165   073E           00725                 ADDWF INDICEX,0
0166   0084           00726                 MOVWF FSR ; INDICAMOS POSICION  ACTUAL EN REGISTRO FRS                
0167   0800           00727                 MOVF INDF,0 ; LEEMOS INDIRECTAMETNE
0168   00BF           00728                 MOVWF VALORX; SACAMOS EL VALOR
0169   0008           00729                 RETURN
                      00730 
                      00731 
                      00732 
                      00733 
                      00734 
                      00735 
                      00736 
                      00737 
                      00738 ;----------------DIVICION GENERAL PARA UN NUMERO DESDE 0 A 255  
                      00739 ;   FUNCION NO UTILIZADA EN ESTE PROGRAMA
                      00740 
016A   01DD           00741 DIV1:           CLRF ARIT_AUX;  WREG= NUM1 /NUM2(DIVISION ENTERA)..Resto en NUM1
016B   085F           00742                MOVF NUM2,0;    
                      00743 
016C   0ADD           00744 BUCLEDIV:      INCF ARIT_AUX,1
016D   02DE           00745                SUBWF NUM1,1
016E   1803           00746                BTFSC STATUS,C;
016F   296C           00747                GOTO BUCLEDIV
                      00748 
0170   07DE           00749                ADDWF NUM1,1               
Message[305]: Using default destination of 1 (file).
0171   03DD           00750                DECF ARIT_AUX
0172   085D           00751                MOVF ARIT_AUX,0
                      00752 
0173   0008           00753                RETURN
                      00754 
                      00755 
                      00756 ;------------------DIVIDIR POR 10 --- ESTE METODO ESTA DISEÑADO PARA UN NUMERO DESDE 0 A 255
                      00757 ;x>99 -> resultado=resultado +10  x=x-100
                      00758 ;x>99 -> resultado=resultado +10  x=x-100
                      00759 ;x>49 -> resultado=resultado+5  x=x-50
                      00760 ;x>29-> resultado= resultado+2  x=x-30
                      00761 ;x>9 -> resultado= resultado+1 x=x-10
                      00762 ;x>9 -> resultado= resultado+1 x=x-10
                      00763 
                      00764 
                      00765 ;------- USANDO EL SUBLW K
                      00766 ;
                      00767 ;   SI W<K   -> Z=0 C=1
                      00768 ;   SI W== K -> Z=1 C=1
                      00769 ;   SI W>K   -> Z=0 C=0
                      00770 
                      00771 
                      00772 
                      00773 ;--------------DIVISION POR 10  
                      00774 ;--------------ESTA FUNCION DEVUELVE   WREG=NUM1/10  RESTO EN NUM1
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00775 ; ESTA FUNCION SE UTILIZA PARA HACER LA CONVERSION DE HEXADECIMAL A DIGITAL Y PODER MOSTRARLO EN DISPLAY
0174                  00776 DIV:
0174   01DD           00777              CLRF ARIT_AUX
                      00778 
0175   085E           00779              MOVF NUM1,0
0176   3C63           00780              SUBLW .99
0177   1803           00781              BTFSC STATUS,C
0178   2985           00782              GOTO DIV102
                      00783 
0179   3064           00784              MOVLW .100
017A   02DE           00785              SUBWF NUM1,1
                      00786 
017B   300A           00787              MOVLW .10
Message[305]: Using default destination of 1 (file).
017C   07DD           00788              ADDWF ARIT_AUX
                      00789 
                      00790 
017D   085E           00791              MOVF NUM1,0
017E   3C63           00792              SUBLW .99
017F   1803           00793              BTFSC STATUS,C
0180   2985           00794              GOTO DIV102
                      00795 
0181   3064           00796              MOVLW .100
0182   02DE           00797              SUBWF NUM1,1
                      00798 
0183   300A           00799              MOVLW .10
Message[305]: Using default destination of 1 (file).
0184   07DD           00800              ADDWF ARIT_AUX
                      00801 
                      00802 
0185   085E           00803 DIV102       MOVF NUM1,0
0186   3C31           00804              SUBLW .49
0187   1803           00805              BTFSC STATUS,C
0188   298D           00806              GOTO DIV103
                      00807 
0189   3032           00808              MOVLW .50
018A   02DE           00809              SUBWF NUM1,1
                      00810 
018B   3005           00811              MOVLW .5
Message[305]: Using default destination of 1 (file).
018C   07DD           00812              ADDWF ARIT_AUX
                      00813 
018D   085E           00814 DIV103       MOVF NUM1,0
018E   3C1D           00815              SUBLW .29
018F   1803           00816              BTFSC STATUS,C
0190   2995           00817              GOTO DIV104
                      00818 
0191   301E           00819              MOVLW .30
0192   02DE           00820              SUBWF NUM1,1
                      00821 
0193   3003           00822              MOVLW .3
Message[305]: Using default destination of 1 (file).
0194   07DD           00823              ADDWF ARIT_AUX
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00824 
0195   085E           00825 DIV104       MOVF NUM1,0
0196   3C09           00826              SUBLW .9
0197   1803           00827              BTFSC STATUS,C
0198   29A5           00828              GOTO DIV106
                      00829 
0199   300A           00830              MOVLW .10
019A   02DE           00831              SUBWF NUM1,1
                      00832 
019B   3001           00833              MOVLW .1
Message[305]: Using default destination of 1 (file).
019C   07DD           00834              ADDWF ARIT_AUX
                      00835 
019D   085E           00836 DIV105       MOVF NUM1,0
019E   3C09           00837              SUBLW .9
019F   1803           00838              BTFSC STATUS,C
01A0   29A5           00839              GOTO DIV106
                      00840 
01A1   300A           00841              MOVLW .10
01A2   02DE           00842              SUBWF NUM1,1
                      00843 
01A3   3001           00844              MOVLW .1
Message[305]: Using default destination of 1 (file).
01A4   07DD           00845              ADDWF ARIT_AUX
                      00846 
01A5                  00847 DIV106
                      00848 
01A5   085D           00849              MOVF ARIT_AUX,0
01A6   0008           00850              RETURN
                      00851 ;-----------------------------------------------------
                      00852 ;-----------------------------------------------------
                      00853 ;-----------------------------------------------------
                      00854 
                      00855 
01A7                  00856 CONVERTIR      
01A7   1033           00857                BCF ADCFLAG,0
01A8   151F           00858                BSF ADCON0,2 
                      00859 
                      00860     
01A9   191F           00861 ESPERAR_AD:    BTFSC ADCON0,2; EN LA DULCE ESPERA DE LA CONVERSION, TA TA RA TA TA
01AA   29A9           00862                GOTO ESPERAR_AD     
                      00863 
                      00864 
                      00865 
01AB   0865           00866                MOVF ADPROMH,0 
01AC   00E2           00867                MOVWF NUMDH
01AD   0864           00868                MOVF ADPROML,0
01AE   00E3           00869                MOVWF NUMDL
                      00870 
                      00871 ; DIVIDIR POR 16. 
                      00872 ; COMO SE TRABAJA EN BINARIO DIVIDIR POR UN MULTIPLO DE 2 EQUIVALE A MOVER ALGUNOS BITS DE LUGAR.
                      00873 ; EN CASO DE 16  EN BINARIO ES 10000 ESO IMPLICA MOVER 4 BITS.
                      00874 ; ASI COMO SI TRABAJAMOS EN DIGITAL DIVIDIR POR 10 EQUIVALE A CORRER LA COMA HACIA IZQUIERDA O
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00875 ; SEA MOVER LA UNIDAD, LA DECENA ETC. APROVECHO LO MISMO PERO EN HEXADECIMAL
                      00876 
                      00877 
                      00878 ; POR ESTA RAZON SE USA LEFT JUSTIFIED EN EL CONVERSOR
                      00879 ; SE APROBECHA ESOS BITS DE LA DERECHA PARA GUARDAR LO QUE ESTA DESPUES DEL PUNTO 
                      00880 
                      00881 
                      00882 
                      00883 ; SE IMPLEMENTA UNA ESPECIE DE PROMEDIACION
                      00884 ; AL VALOR PROMEDIO SE LE EXTRAE UNA PARTE DE 1/16 Y SE LE SUMA LA NUEVA LECTURA DIVIDIDA EN 16
                      00885 ; TIENE UNA CONVERGENCIA UN POCO MAS LENTA QUE UN PROMEDIO REAL DE 16 DATOS QUE OCUPARIAN 32 REGISTROS
                      00886 ; LA FINALIDAD ES LA MISMA DE HECHO ESTE METODO ES MEJOR
                      00887 
                      00888 ; AUN SE PUEDRIA MEJORAR LA DIVICION AGREGANDO MAS REGISTROS PARA GUARDAR NUMEROS DESPUES DE LA COMA
                      00889 
                      00890 
01AF   01E0           00891 DIV16          CLRF DIVDRTAH
01B0   01E1           00892                CLRF DIVDRTAL
01B1   0863           00893                MOVF NUMDL,0
01B2   0E62           00894                SWAPF NUMDH,0
01B3   00E0           00895                MOVWF DIVDRTAH  ;  DIVDRTAH=SWAPF (NUMDH)
01B4   39F0           00896                ANDLW B'11110000'
01B5   00E1           00897                MOVWF DIVDRTAL  ;   DIVDRTAL=(DIVDRTAH) AND(B'11110000') 
01B6   300F           00898                MOVLW B'00001111'
01B7   05E0           00899                ANDWF DIVDRTAH,1; DIVDRTAH=(DIVDRTAH) AND(B'00001111')
01B8   0E63           00900                SWAPF NUMDL,0
01B9   390F           00901                ANDLW B'00001111'
Message[305]: Using default destination of 1 (file).
01BA   07E1           00902                ADDWF DIVDRTAL   ; DIVDRTAL=DIVDRTAL+[SWAPF(NUMDL)] AND(B'00001111')
                      00903 
01BB                  00904 PROMEDIARAD:  
                      00905 
                      00906                                           ;PASO1:   RESTARLE 1/16 AL PROMEDIO
                      00907                            ; (RESTA DE DOBLE-BYTE)
01BB   0861           00908               MOVF DIVDRTAL,0;
01BC   02E4           00909               SUBWF ADPROML,1; ADPROML=ADPROML-DIVDRTAL
01BD   1C03           00910               BTFSS STATUS,C; SI CARRIER ES 0 ES PORQUE ADPROML<DIVDRTAL HAY QUE SACARLE 1 A ADPROMH
Message[305]: Using default destination of 1 (file).
01BE   03E5           00911               DECF ADPROMH;
01BF   0860           00912               MOVF DIVDRTAH,0;
01C0   02E5           00913               SUBWF ADPROMH,1; ADPROMH= ADPROMH-DIVDRTAH 
                      00914                                      ; POR SER DIVRTA(H:L) EL 10% DE ADPROM(H:L)  LA RESTA DA UN NUMERO 
                            POSITIVO
                      00915 
                      00916 
                      00917 
                      00918                                       ;PASO2:  LEER REGISTROS DE CONVERSION Y DIVIDIRLOS EN 16
01C1                  00919 AGREGARLECTURA
01C1   1683           00920                BSF STATUS, RP0 ; (IR AL BANCO 1) 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C2   081E           00921                MOVF ADRESL,0;
01C3   1283           00922                BCF STATUS, RP0 ; (VOLVER AL BANCO 0) 
                      00923                
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01C4   39C0           00924                ANDLW B'11000000'; SE FILTRA POR LAS DUDAS, SOLO SON UTILES LOS BITS 7 Y 6
01C5   00E3           00925                MOVWF NUMDL
                      00926                
01C6   081E           00927                MOVF ADRESH,0
01C7   00E2           00928                MOVWF NUMDH
                      00929 
01C8   01E0           00930 DIV162         CLRF DIVDRTAH
01C9   01E1           00931                CLRF DIVDRTAL
01CA   0863           00932                MOVF NUMDL,0
01CB   0E62           00933                SWAPF NUMDH,0
01CC   00E0           00934                MOVWF DIVDRTAH  ;  DIVDRTAH=SWAPF (NUMDH)
01CD   39F0           00935                ANDLW B'11110000'
01CE   00E1           00936                MOVWF DIVDRTAL  ;   DIVDRTAL=(DIVDRTAH) AND(B'11110000') 
01CF   300F           00937                MOVLW B'00001111'
01D0   05E0           00938                ANDWF DIVDRTAH,1; DIVDRTAH=(DIVDRTAH) AND(B'00001111')
01D1   0E63           00939                SWAPF NUMDL,0
01D2   390F           00940                ANDLW B'00001111'
Message[305]: Using default destination of 1 (file).
01D3   07E1           00941                ADDWF DIVDRTAL   ; DIVDRTAL=DIVDRTAL+[SWAPF(NUMDL)] AND(B'00001111')     
                      00942                
                      00943                                          ;PASO3: SUMARSELO AL PROMEDIO
                      00944                                            ;(SUMA DOBLE-BYTE)
01D4   0861           00945                MOVF DIVDRTAL,0;
01D5   07E4           00946                ADDWF ADPROML,1; ADPROML= ADPROML+DIVDRTAL
01D6   1803           00947                BTFSC STATUS,C; SI HAY CARRIER HAY QUE SUMARLE 1 A 
01D7   0AE5           00948                INCF ADPROMH,1;
01D8   0860           00949                MOVF DIVDRTAH,0;
01D9   07E5           00950                ADDWF ADPROMH,1; ADPROMH= ADPROMH+DIVDRTAH
                      00951 
                      00952 
                      00953 
                      00954 ;1.75---- 358.4  5980
                      00955 ;2.25---- 460.8  7333
                      00956 
                      00957 ;2.75---- 563.2  8ccc
                      00958 ;3.25---- 665.6  A666
                      00959 
                      00960 ;3.75---- 768    c000
                      00961 ;4.25---- 870.4  D980
                      00962 
                      00963 ;------- USANDO EL SUBLW K
                      00964 ;
                      00965 ;   SI W<K   -> Z=0 C=1
                      00966 ;   SI W== K -> Z=1 C=1
                      00967 ;   SI W>K   -> Z=0 C=0
                      00968 
                      00969 
                      00970 ;*****************************************************************************************************
                      00971 ;*****************************************************************************************************
                      00972 ;*****************************************************************************************************
                      00973 ;*****************************************************************************************************
                      00974 ;*****************************************************************************************************
                      00975 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00976 ; ACA ES DONDE SE HACEN LAS COMPARACIONES SI HAY QUE CAMBIAR VALORES DEBE HACERSE ACA
                      00977 ;*****************************************************************************************************
                      00978 
                      00979 
                      00980 ; ESTA TABLA FUE CONFECCIONADA CON UNA TENSION DE REFERENCIA MAXIMA DE 5.1V Y MINIMA DE 0V
                      00981 ; PARA 4 V SE ASUME QUE HAY 220V EFECTIVOS EN LA LINEA
                      00982 ; EL CONVERSOR TRABAJA EN LEFT JUSTIFIED ESO IMPLICA QUE A LA LECTURA DEL CONVERSOR SE LE MULTIPLICA .64
                      00983 ; POR EJEMPLO SI LEEMOS 857 * 64 =  54905  ESTO EN HEXADECIMAL ES  D679 QUE ES LO QUE TENEMOS QUE COMPAR
                            AR.
                      00984 
                      00985 ;TensiónVAC      TensiónVCC    Conversor      LEFT JUSTIFIED   HEXADECIMAL
                      00986 ;275         5          
                      00987 ;235         4,272727273   857,8966132   54905,38324       D679
                      00988 ;225         4,090909091   821,3903743   52568,98396       CD59
                      00989 ;215         3,909090909   784,8841355   50232,58467       C438
                      00990 ;205         3,727272727   748,3778966   47896,18538       BB18
                      00991 ;195         3,545454545   711,8716578   45559,7861        B1F8
                      00992 ;185         3,363636364   675,3654189   43223,38681       A8D7
                      00993 ;175         3,181818182   638,85918     40886,98752       9FB7
                      00994 ;165         3             602,3529412   38550,58824       9697
                      00995 
                      00996 
                      00997 ;COMO LA COMPARACION SE HACE CON NUMEROS DE 16 BITS NECESITAMOS 2 REGISTROS DE 8 BITS Y COMPARA CADA PAR
                            .
                      00998 
                      00999 
                      01000 ;--------------------------------------------------------------------------------
                      01001 ; TABLA VMAX 4.8 VMIN 0   220=4
                      01002 ;
                      01003 ;Tension VCA    Tension VCC Lectura      Hexadecimal
                      01004 ;245            4,454545455 950,3030303  ED93
                      01005 ;235            4,272727273 911,5151515  E3E0
                      01006 ;225            4,090909091 872,7272727  DA2E
                      01007 ;215            3,909090909 833,9393939  D07C
                      01008 ;205            3,727272727 795,1515152  C6C9
                      01009 ;195            3,545454545 756,3636364  BD17
                      01010 ;185            3,363636364 717,5757576  B364
                      01011 ;175            3,181818182 678,7878788  A9B2
                      01012 ;165            3           640          A000
                      01013 ;
                      01014 ;-----------------------------------------------------------------------------------------
                      01015 ; 
                      01016 ;   TABLA VMAX 4.87 VMIN0 220=3.9
                      01017 ;Tension VCA    Tension VCC     Lectura Hexadecimal     
                      01018 
                      01019 ;250    4,431818182     931,8648497     E8F7    
                      01020 ;245    4,343181818     913,2275527     E44E    
                      01021 ;235    4,165909091     875,9529587     DAFC    *
                      01022 ;230    4,077272727     857,3156618     D654
                      01023 ;225    3,988636364     838,6783648     D1AB    *
                      01024 ;215    3,811363636     801,4037708     C859    *
                      01025 ;205    3,634090909     764,1291768     BF08    *
                      01026 ;195    3,456818182     726,8545828     B5B6    *
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01027 ;185    3,279545455     689,5799888     AC65    *
                      01028 ;175    3,102272727     652,3053948     A313    *
                      01029 ;165    2,925   615,0308008     99C1
                      01030 ;150    2,659090909     559,1189098     8BC7
                      01031 
                      01032 
                      01033 
                      01034 ;**********************************************************************************************
                      01035 
01DA                  01036 COMPARARSALIDA
                      01037 
01DA   01DC           01038                CLRF ARITCARRIER
01DB   0865           01039                MOVF ADPROMH,0
01DC   00F5           01040                MOVWF COMPA
01DD   0AF5           01041                INCF COMPA,1
                      01042              
                      01043 
                      01044                
                      01045                                                   ;150 -> 8BC7
                      01046 
01DE   0864           01047                MOVF ADPROML,0
01DF   3CC7           01048                SUBLW 0XC7
01E0   1803           01049                BTFSC STATUS,C ; ADPROML <= 0XA9
01E1   29E4           01050                GOTO COMPA1
01E2   0875           01051                MOVF COMPA,0
01E3   29E5           01052                GOTO COMPA11  
01E4   0865           01053 COMPA1         MOVF ADPROMH,0
01E5   3C8B           01054 COMPA11        SUBLW 0X8B
01E6   1803           01055                BTFSC STATUS,C; ADPROMH<=0XB2
01E7   2A3B           01056                GOTO APAGARLED0
                      01057 
                      01058                                                   ;250 --> E8F7
01E8   0864           01059                MOVF ADPROML,0
01E9   3CF7           01060                SUBLW 0XF7
01EA   1803           01061                BTFSC STATUS,C ; ADPROML <= 0X59?
01EB   29EE           01062                GOTO COMPA2 ; ACARREO=1
01EC   0875           01063                MOVF COMPA,0; ACARREO=0
01ED   29EF           01064                GOTO COMPA21  
01EE   0865           01065 COMPA2         MOVF ADPROMH,0
01EF   3CE8           01066 COMPA21        SUBLW 0XE8
01F0   1C03           01067                BTFSS STATUS,C; ADPROMH>.CD ?
01F1   2A4B           01068                GOTO APAGARLED8 ;SI
                      01069 
                      01070                                                   ;175 --> A313
01F2   0864           01071                MOVF ADPROML,0
01F3   3C13           01072                SUBLW 0X13
01F4   1803           01073                BTFSC STATUS,C ; ADPROML <= 0XD7?
01F5   29F8           01074                GOTO COMPA3 ; ACARREO=1
01F6   0875           01075                MOVF COMPA,0; ACARREO=0
01F7   29F9           01076                GOTO COMPA31  
01F8   0865           01077 COMPA3         MOVF ADPROMH,0 
01F9   3CA3           01078 COMPA31        SUBLW 0XA3
01FA   1803           01079                BTFSC STATUS,C; ADPROMH<=675
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01FB   2A49           01080                GOTO PRENDERLED1;SI
                      01081 
                      01082 
                      01083                                                   ;185 --> AC65
01FC   0864           01084                MOVF ADPROML,0
01FD   3C65           01085                SUBLW 0X65
01FE   1803           01086                BTFSC STATUS,C ; ADPROML <= 0XD7?
01FF   2A02           01087                GOTO COMPA4 ; ACARREO=1
0200   0875           01088                MOVF COMPA,0; ACARREO=0
0201   2A03           01089                GOTO COMPA41  
0202   0865           01090 COMPA4         MOVF ADPROMH,0 
0203   3CAC           01091 COMPA41        SUBLW 0XAC
0204   1803           01092                BTFSC STATUS,C; ADPROMH<=675
0205   2A47           01093                GOTO PRENDERLED2;SI
                      01094 
                      01095                                                   ;195 --> B5B6
0206   0864           01096                MOVF ADPROML,0
0207   3CB6           01097                SUBLW 0XB6
0208   1803           01098                BTFSC STATUS,C ; ADPROML <= 0XF8?
0209   2A0C           01099                GOTO COMPA5 ; ACARREO=1
020A   0875           01100                MOVF COMPA,0; ACARREO=0
020B   2A0D           01101                GOTO COMPA51  
020C   0865           01102 COMPA5         MOVF ADPROMH,0
020D   3CB5           01103 COMPA51        SUBLW 0XB5
020E   1803           01104                BTFSC STATUS,C; ADPROMH<=.771
020F   2A45           01105                GOTO PRENDERLED3;SI
                      01106 
                      01107                                                   ;205 --> BF08
0210   0864           01108                MOVF ADPROML,0
0211   3C08           01109                SUBLW 0X08
0212   1803           01110                BTFSC STATUS,C ; ADPROML <= 0X18?
0213   2A16           01111                GOTO COMPA6 ; ACARREO=1
0214   0875           01112                MOVF COMPA,0; ACARREO=0
0215   2A17           01113                GOTO COMPA61  
0216   0865           01114 COMPA6         MOVF ADPROMH,0
0217   3CBF           01115 COMPA61        SUBLW 0XBF
0218   1803           01116                BTFSC STATUS,C; ADPROMH<=.748
0219   2A43           01117                GOTO PRENDERLED4;SI
                      01118 
                      01119                                                   ;215 --> C859
021A   0864           01120                MOVF ADPROML,0
021B   3C59           01121                SUBLW 0X59
021C   1803           01122                BTFSC STATUS,C ; ADPROML <= 0X38?
021D   2A20           01123                GOTO COMPA7 ; ACARREO=1
021E   0875           01124                MOVF COMPA,0; ACARREO=0
021F   2A21           01125                GOTO COMPA71  
0220   0865           01126 COMPA7         MOVF ADPROMH,0
0221   3CC8           01127 COMPA71        SUBLW 0XC8
0222   1803           01128                BTFSC STATUS,C; ADPROMH<=784
0223   2A41           01129                GOTO PRENDERLED5;SI
                      01130 
                      01131                                                   ;230 --> D654
0224   0864           01132                MOVF ADPROML,0
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0225   3C54           01133                SUBLW 0X54
0226   1803           01134                BTFSC STATUS,C ; ADPROML <= 0X59?
0227   2A2A           01135                GOTO COMPA8 ; ACARREO=1
0228   0875           01136                MOVF COMPA,0; ACARREO=0
0229   2A2B           01137                GOTO COMPA81  
022A   0865           01138 COMPA8         MOVF ADPROMH,0
022B   3CD6           01139 COMPA81        SUBLW 0XD6
022C   1803           01140                BTFSC STATUS,C; ADPROMH<=821
022D   2A3F           01141                GOTO PRENDERLED6;SI
                      01142 
                      01143 
                      01144                                                     ;250 --> E8F7
022E   0864           01145                MOVF ADPROML,0
022F   3CF7           01146                SUBLW 0XF7
0230   1803           01147                BTFSC STATUS,C ; ADPROML <= 0X59?
0231   2A34           01148                GOTO COMPA9 ; ACARREO=1
0232   0875           01149                MOVF COMPA,0; ACARREO=0
0233   2A35           01150                GOTO COMPA91  
0234   0865           01151 COMPA9         MOVF ADPROMH,0
0235   3CE8           01152 COMPA91        SUBLW 0XE8
0236   1803           01153                BTFSC STATUS,C; ADPROMH<=821
0237   2A3D           01154                GOTO PRENDERLED7;SI
                      01155 
                      01156 
                      01157 
0238   3000           01158                MOVLW B'00000000'
0239   0087           01159                MOVWF PORTC                            
023A   2A4D           01160                GOTO LEER_AD 
                      01161 
                      01162 ;  SEGUN CUAL SEA EL NIVEL DE TENSION SE INCREMENTA EN UNO LA FRECx CORRESPONDIENTE
                      01163 
023B   0ACE           01164 APAGARLED0     INCF FREC0,1
023C   2A4D           01165                GOTO LEER_AD
023D   0ABC           01166 PRENDERLED7    INCF FREC7,1               
023E   2A4D           01167                GOTO LEER_AD
023F   0ABB           01168 PRENDERLED6    INCF FREC6,1
0240   2A4D           01169                GOTO LEER_AD
0241   0ABA           01170 PRENDERLED5    INCF FREC5,1
0242   2A4D           01171                GOTO LEER_AD
0243   0AB9           01172 PRENDERLED4    INCF FREC4,1
0244   2A4D           01173                GOTO LEER_AD
0245   0AB8           01174 PRENDERLED3    INCF FREC3,1
0246   2A4D           01175                GOTO LEER_AD
0247   0AB7           01176 PRENDERLED2    INCF FREC2,1
0248   2A4D           01177                GOTO LEER_AD
0249   0AB6           01178 PRENDERLED1    INCF FREC1,1
024A   2A4D           01179                GOTO LEER_AD
024B   0ACF           01180 APAGARLED8     INCF FREC8,1
024C   2A4D           01181                GOTO LEER_AD
                      01182 
                      01183 
                      01184 
                      01185 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01186 
                      01187 
                      01188 
                      01189 
                      01190 
                      01191 
                      01192 ;**********************************************************
                      01193 
024D                  01194 LEER_AD:
                      01195                
                      01196    ; EL OJO HUMANO TIENE UN LIMITE DE VELOCIDAD, SE ESTA MUESTREANDO CADA MILISEGUNDO
                      01197    ; LOS DISPLAYS SE ACTUALIZAN CADA CUARTO DE SEGUNDO O SEA CADA 250 MILISEGUNDO
                      01198    ; ESTO TIENE DOS VENTAJAS
                      01199    ; > QUE EL PIC TENGA MENOS TAREAS
                      01200    ; > LA OTRA ES EVITAR QUE LOS DISPLAYS CAMBIEN BRUSCAMENTE
                      01201    ; SI BIEN LA PROMEDIACION DE LA MEDICIONES TIENE UNA CONVERGENCIA LENTA, AUN SIGUE SIENDO RAPIDA
                      01202    ; PARA LOS DISPLAYS
                      01203    ; NO TIENE SENTIDO AUMENTAR LAS PROMEDIACIONES PARA LOS DISPLAYS
                      01204      
                      01205    ; IGUAL ESTO NO AFECTA A LOS RELES YA QUE SI SE HACE OTRAS PROMEDIACIONES ADICIONALES PARA ELLOS
                      01206 
                      01207 
024D   1CB3           01208                BTFSS ADCFLAG,1   
024E   2851           01209                GOTO BUCLE
                      01210                
024F   10B3           01211                BCF ADCFLAG,1
                      01212                
                      01213 
0250   01E6           01214                CLRF UC; LIMPIAR UNIDAD DE CONVERSOR
0251   01E7           01215                CLRF DCV; LIMPIAR DECIMA DE CONVERSOR
0252   01E8           01216                CLRF CC; LIMPIAR CENTESIMA DE CONVERSOR
0253   01E9           01217                CLRF MC; LIMPIAR MILESIMA DE CONVERSOR
0254   01F0           01218                CLRF DMC; LIMPIAR DECIMA DE MILESIMA DE CONVERSOR
0255   01F1           01219                CLRF CMC; LIMPIAR CENTESIMA DE MILESIMA DE CONVERSOR           
                      01220 
                      01221 
                      01222 
                      01223 
                      01224 
0256   1FE5           01225 BIT9:          BTFSS ADPROMH,7
0257   2A5C           01226                GOTO BIT8
                      01227 
0258   3002           01228                MOVLW .2
0259   07E6           01229                ADDWF UC,1
                      01230 
025A   3005           01231                MOVLW .5
025B   07E7           01232                ADDWF DCV,1
                      01233 
                      01234 
025C   1F65           01235 BIT8:          BTFSS ADPROMH,6
025D   2A64           01236                GOTO BIT7            
                      01237 
025E   3001           01238                MOVLW .1
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

025F   07E6           01239                ADDWF UC,1
                      01240 
0260   3002           01241                MOVLW .2
0261   07E7           01242                ADDWF DCV,1
                      01243 
0262   3005           01244                MOVLW .5
Message[305]: Using default destination of 1 (file).
0263   07E8           01245                ADDWF CC
                      01246 
                      01247 
                      01248 
                      01249 
0264                  01250 BIT7:                        
0264   1EE5           01251                BTFSS ADPROMH,5
0265   2A6C           01252                GOTO BIT6  
                      01253 
0266   3006           01254                MOVLW .6
0267   07E7           01255                ADDWF DCV,1
                      01256 
0268   3002           01257                MOVLW .2
Message[305]: Using default destination of 1 (file).
0269   07E8           01258                ADDWF CC
                      01259 
026A   3005           01260                MOVLW .5
026B   07E9           01261                ADDWF MC,1
                      01262                
                      01263  
                      01264            
026C                  01265 BIT6:                   
026C   1E65           01266                BTFSS ADPROMH,4
026D   2A76           01267                GOTO BIT5  
                      01268 
                      01269           
026E   3003           01270                MOVLW .3
026F   07E7           01271                ADDWF DCV,1
                      01272 
0270   3001           01273                MOVLW .1
Message[305]: Using default destination of 1 (file).
0271   07E8           01274                ADDWF CC
                      01275 
0272   3002           01276                MOVLW .2
0273   07E9           01277                ADDWF MC,1
                      01278                
0274   3005           01279                MOVLW .5
0275   07F0           01280                ADDWF DMC,1
                      01281 
                      01282  
                      01283 
                      01284 
                      01285 
0276   1DE5           01286 BIT5:          BTFSS ADPROMH,3
0277   2A82           01287                GOTO BIT4  
                      01288 
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01289                
0278   3001           01290                MOVLW .1
0279   07E7           01291                ADDWF DCV,1
                      01292 
027A   3005           01293                MOVLW .5
Message[305]: Using default destination of 1 (file).
027B   07E8           01294                ADDWF CC
                      01295 
027C   3006           01296                MOVLW .6
027D   07E9           01297                ADDWF MC,1
                      01298                
027E   3002           01299                MOVLW .2
027F   07F0           01300                ADDWF DMC,1
                      01301 
0280   3005           01302                MOVLW .5
0281   07F1           01303                ADDWF CMC,1
                      01304 
                      01305 
                      01306 
0282   1D65           01307 BIT4:          BTFSS ADPROMH,2
0283   2A8C           01308                GOTO BIT3  
                      01309 
                      01310                  
                      01311 
0284   3007           01312                MOVLW .7
Message[305]: Using default destination of 1 (file).
0285   07E8           01313                ADDWF CC
                      01314 
0286   3008           01315                MOVLW .8
0287   07E9           01316                ADDWF MC,1
                      01317                
0288   3001           01318                MOVLW .1
0289   07F0           01319                ADDWF DMC,1
                      01320 
028A   3002           01321                MOVLW .2
028B   07F1           01322                ADDWF CMC,1
                      01323 
                      01324 
                      01325 
                      01326 
028C   1CE5           01327 BIT3:          BTFSS ADPROMH,1
028D   2A96           01328                GOTO BIT2            
                      01329 
                      01330 
                      01331 
028E   3003           01332                MOVLW .3
Message[305]: Using default destination of 1 (file).
028F   07E8           01333                ADDWF CC
                      01334 
0290   3009           01335                MOVLW .9
0291   07E9           01336                ADDWF MC,1
                      01337                
0292   3000           01338                MOVLW .0
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0293   07F0           01339                ADDWF DMC,1
                      01340 
0294   3006           01341                MOVLW .6
0295   07F1           01342                ADDWF CMC,1
                      01343 
                      01344 
0296   1C65           01345 BIT2:          BTFSS ADPROMH,0
0297   2AA0           01346                GOTO BIT1            
                      01347 
                      01348 
                      01349    
0298   3001           01350                MOVLW .1
Message[305]: Using default destination of 1 (file).
0299   07E8           01351                ADDWF CC
                      01352 
029A   3009           01353                MOVLW .9
029B   07E9           01354                ADDWF MC,1
                      01355                
029C   3005           01356                MOVLW .5
029D   07F0           01357                ADDWF DMC,1
                      01358 
029E   3003           01359                MOVLW .3
029F   07F1           01360                ADDWF CMC,1
                      01361 
                      01362 
                      01363 
                      01364 
02A0   1FE4           01365 BIT1:          BTFSS ADPROML,7
02A1   2AA8           01366                GOTO BIT0  
                      01367 
                      01368 
                      01369    
02A2   3009           01370                MOVLW .9
02A3   07E9           01371                ADDWF MC,1
                      01372                
02A4   3007           01373                MOVLW .7
02A5   07F0           01374                ADDWF DMC,1
                      01375 
02A6   3007           01376                MOVLW .7; (SE HA REDONDEADO PARA ARRIBA)
02A7   07F1           01377                ADDWF CMC,1
                      01378 
                      01379 
                      01380         
                      01381 
                      01382 
02A8   1F64           01383 BIT0:          BTFSS ADPROML,6
02A9   2AB0           01384                GOTO  DIGITALIZAR 
                      01385 
                      01386                
02AA   3004           01387                MOVLW .4
02AB   07E9           01388                ADDWF MC,1
                      01389                
02AC   3008           01390                MOVLW .8
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02AD   07F0           01391                ADDWF DMC,1
                      01392 
02AE   3008           01393                MOVLW .8
02AF   07F1           01394                ADDWF CMC,1
                      01395 
                      01396 
                      01397 
02B0                  01398 DIGITALIZAR:                   ; EL DIVISOR ES NUM2 QUE FUE PREVIAMENTE CARGADO CON .10
                      01399                
02B0   300A           01400               MOVLW 0X0A   ; NUM2=.10 QUE ES USADO COMO DIVISOR DE 1 BYTE
02B1   00DF           01401               MOVWF NUM2  
                      01402 
02B2   0871           01403                MOVF CMC,0
02B3   00DE           01404                MOVWF NUM1; NUM1=CMC
02B4   2174           01405                CALL DIV    ; NUM1/NUM2=W O SEA W=CMC/10  NUM1=RESTO
02B5   07F0           01406                ADDWF DMC,1  ; DMC= DMC+CMC/10
02B6   085E           01407                MOVF NUM1,0
02B7   00F1           01408                MOVWF CMC    ; CMC=RESTO
                      01409 
02B8   0870           01410                MOVF DMC,0
02B9   00DE           01411                MOVWF NUM1; NUM1=DMC
02BA   2174           01412                CALL DIV    ; NUM1/NUM2=W O SEA W=DMC/10  NUM1=RESTO
02BB   07E9           01413                ADDWF MC,1  ; MC= MC+DMC/10
02BC   085E           01414                MOVF NUM1,0
02BD   00F0           01415                MOVWF DMC    ; DMC=RESTO
                      01416 
02BE   0869           01417                MOVF MC,0
02BF   00DE           01418                MOVWF NUM1; NUM1=CMC
02C0   2174           01419                CALL DIV    ; NUM1/NUM2=W O SEA W=MC/10  NUM1=RESTO
02C1   07E8           01420                ADDWF CC,1  ; CC= CC+MC/10
02C2   085E           01421                MOVF NUM1,0
02C3   00E9           01422                MOVWF MC    ; MC=RESTO
                      01423 
02C4   0868           01424                MOVF CC,0
02C5   00DE           01425                MOVWF NUM1; NUM1=CMC
02C6   2174           01426                CALL DIV    ; NUM1/NUM2=W O SEA W=CC/10  NUM1=RESTO
02C7   07E7           01427                ADDWF DCV,1  ; DCV= DCV+CC/10
02C8   085E           01428                MOVF NUM1,0
02C9   00E8           01429                MOVWF CC    ; CC=RESTO
                      01430 
02CA   0867           01431                MOVF DCV,0
02CB   00DE           01432                MOVWF NUM1; NUM1=CMC
02CC   2174           01433                CALL DIV    ; NUM1/NUM2=W O SEA W=DCV/10  NUM1=RESTO
02CD   07E6           01434                ADDWF UC,1  ; UC= UC+DCV/10
02CE   085E           01435                MOVF NUM1,0
02CF   00E7           01436                MOVWF DCV    ; DCV=RESTO
                      01437 
                      01438 
02D0                  01439 TRANSFERIR:               
02D0   0866           01440                MOVF UC,0;        DISPLAY1=UC //DISPLAY2=DCV // DISPLAY3=CC // DISPLAY4=MC
02D1   00D1           01441                MOVWF DISPLAY1;
02D2   0867           01442                MOVF DCV,0;
02D3   00D2           01443                MOVWF DISPLAY2;
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02D4   0868           01444                MOVF CC,0;
02D5   00D3           01445                MOVWF DISPLAY3;
02D6   0869           01446                MOVF MC,0;
02D7   00D4           01447                MOVWF DISPLAY4;
                      01448 
                      01449 
02D8   2851           01450                GOTO BUCLE
02D9   2851           01451                GOTO BUCLE
                      01452 
                      01453 
                      01454 
                      01455 
                      01456                 
                      01457 
                      01458 
                      01459 
                      01460 
                      01461 
                      01462 
                      01463                
                      01464 
                      01465                 
                      01466 
                      01467                
                      01468 
                      01469 
                      01470 
                      01471                 END
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCFLAG                           00000033
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADPROMH                           00000065
ADPROML                           00000064
ADRESH                            0000001E
ADRESL                            0000009E
AGREGARLECTURA                    000001C1
APAGARLED0                        0000023B
APAGARLED8                        0000024B
ARITCARRIER                       0000005C
ARIT_AUX                          0000005D
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BIT0                              000002A8
BIT1                              000002A0
BIT2                              00000296
BIT3                              0000028C
BIT4                              00000282
BIT5                              00000276
BIT6                              0000026C
BIT7                              00000264
BIT8                              0000025C
BIT9                              00000256
BRGH                              00000002
BUCLE                             00000051
BUCLEDIV                          0000016C
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CC                                00000068
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMC                               00000071
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
COMPA                             00000075
COMPA1                            000001E4
COMPA11                           000001E5
COMPA2                            000001EE
COMPA21                           000001EF
COMPA3                            000001F8
COMPA31                           000001F9
COMPA4                            00000202
COMPA41                           00000203
COMPA5                            0000020C
COMPA51                           0000020D
COMPA6                            00000216
COMPA61                           00000217
COMPA7                            00000220
COMPA71                           00000221
COMPA8                            0000022A
COMPA81                           0000022B
COMPA9                            00000234
COMPA91                           00000235
COMPARARSALIDA                    000001DA
CONFIGURACION                     0000002E
CONVERTIR                         000001A7
CREN                              00000004
CSRC                              00000007
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

CUARTOSEGUNDO                     00000031
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DCV                               00000067
DIGITALIZAR                       000002B0
DIS1                              0000005C
DIS2                              00000060
DIS3                              00000064
DIS4                              00000068
DISPLAY                           00000051
DISPLAY1                          00000051
DISPLAY2                          00000052
DISPLAY3                          00000053
DISPLAY4                          00000054
DISPLAYFLAG                       00000055
DIV                               00000174
DIV1                              0000016A
DIV102                            00000185
DIV103                            0000018D
DIV104                            00000195
DIV105                            0000019D
DIV106                            000001A5
DIV16                             000001AF
DIV162                            000001C8
DIVDRTAH                          00000060
DIVDRTAL                          00000061
DMC                               00000070
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ESPERAR_AD                        000001A9
F                                 00000001
FERR                              00000002
FREC0                             0000004E
FREC1                             00000036
FREC2                             00000037
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

FREC3                             00000038
FREC4                             00000039
FREC5                             0000003A
FREC6                             0000003B
FREC7                             0000003C
FREC8                             0000004F
FRECFLAG                          00000034
FRECFLAG2                         00000035
FRECUENCIA0                       00000045
FRECUENCIA1                       00000046
FRECUENCIA2                       00000047
FRECUENCIA3                       00000048
FRECUENCIA4                       00000049
FRECUENCIA5                       0000004A
FRECUENCIA6                       0000004B
FRECUENCIA7                       0000004C
FRECUENCIA8                       0000004D
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INCFRE0                           000000C9
INCFRE1                           000000CB
INCFRE2                           000000CD
INCFRE20                          0000013B
INCFRE21                          0000013F
INCFRE22                          00000143
INCFRE23                          00000147
INCFRE24                          0000014B
INCFRE25                          0000014F
INCFRE26                          00000153
INCFRE27                          00000157
INCFRE28                          0000015B
INCFRE3                           000000CF
INCFRE4                           000000D1
INCFRE5                           000000D3
INCFRE6                           000000D5
INCFRE7                           000000D7
INCFRE8                           000000D9
INDF                              00000000
INDICEX                           0000003E
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LEERAD                            00000160
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

LEER_AD                           0000024D
MC                                00000069
MILISEGUNDO                       00000030
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NUM1                              0000005E
NUM2                              0000005F
NUMDH                             00000062
NUMDL                             00000063
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCLATHAUX                         00000042
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
POSICIONARX                       00000164
POSICIONX                         0000003D
PR2                               00000092
PRENDERLED1                       00000249
PRENDERLED2                       00000247
PRENDERLED3                       00000245
PRENDERLED4                       00000243
PRENDERLED5                       00000241
PRENDERLED6                       0000023F
PRENDERLED7                       0000023D
PROMEDIARAD                       000001BB
PROMFBORRAR                       000000B2
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

PROMFBORRAR2                      00000122
PROMFPASO1                        00000072
PROMFPASO12                       000000E2
PROMFPASO2                        0000007A
PROMFPASO22                       000000EA
PROMFPASO3                        00000082
PROMFPASO32                       000000F2
PROMFPASO4                        0000008A
PROMFPASO42                       000000FA
PROMFPASO5                        00000092
PROMFPASO52                       00000102
PROMFPASO6                        0000009A
PROMFPASO62                       0000010A
PROMFPASO7                        000000A2
PROMFPASO72                       00000112
PROMFPASO8                        000000AA
PROMFPASO82                       0000011A
PROMFREC                          0000006C
PROMFREC2                         000000DC
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SALIRINT                          00000028
SEGUNDO                           00000032
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUSAUX                         00000041
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRANSFERIR                        000002D0
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
UC                                00000066
VALORX                            0000003F
W                                 00000000
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

WCOL                              00000007
WR                                00000001
WREGAUX                           00000040
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F873A                         00000001
__DEBUG                           1


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XX--XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.39                            A1.ASM   1-19-2013  1:01:28         PAGE 39


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXX------ ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   728
Program Memory Words Free:  3368


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    24 reported,     0 suppressed

